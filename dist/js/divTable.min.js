/*! divTable v0.1.0 | AGPL http://www.gnu.org/licenses/ */
var divTableMaker=function(){"use strict";var a,b,c;!function(){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;if(!a)for(g="2.7",h=1,i="000000",j=1e3,k={},l=function(b){return a.isArray(b)||a.isObject(b)?b:JSON.parse(b)},u=function(a,b){return v(a,function(a){return b.indexOf(a)>=0})},v=function(a,b,c){var d=[];return null==a?d:Array.prototype.filter&&a.filter===Array.prototype.filter?a.filter(b,c):(m(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},y=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)},x=function(a){var b=c.isArray(a)?[]:c.isObject(a)?{}:null;if(null===a)return a;for(var d in a)b[d]=y(a[d])?a[d].toString():c.isArray(a[d])||c.isObject(a[d])?x(a[d]):a[d];return b},w=function(a){var b=JSON.stringify(a);return null===b.match(/regex/)?b:JSON.stringify(x(a))},m=function(a,b,d){var e,f,g,h;if(a&&(c.isArray(a)&&1===a.length||!c.isArray(a)))b(c.isArray(a)?a[0]:a,0);else for(g=0,a=c.isArray(a)?a:[a],h=a.length;h>g&&(f=a[g],c.isUndefined(f)&&!d||(e=b(f,g),e!==c.EXIT));g++);},n=function(a,b){var d,e,f=0;for(e in a)if(a.hasOwnProperty(e)&&(d=b(a[e],e,f++),d===c.EXIT))break},k.extend=function(a,b){k[a]=function(){return b.apply(this,arguments)}},o=function(b){var d;return c.isString(b)&&/[t][0-9]*[r][0-9]*/i.test(b)?!0:c.isObject(b)&&b.___id&&b.___s?!0:c.isArray(b)?(d=!0,m(b,function(b){return o(b)?void 0:(d=!1,a.EXIT)}),d):!1},q=function(b,d){var e=!0;return m(d,function(d){switch(c.typeOf(d)){case"function":if(!d.apply(b))return e=!1,a.EXIT;break;case"array":e=1===d.length?q(b,d[0]):2===d.length?q(b,d[0])||q(b,d[1]):3===d.length?q(b,d[0])||q(b,d[1])||q(b,d[2]):4===d.length?q(b,d[0])||q(b,d[1])||q(b,d[2])||q(b,d[3]):!1,d.length>4&&m(d,function(a){q(b,a)&&(e=!0)})}}),e},p=function(b){var d=[];return c.isString(b)&&/[t][0-9]*[r][0-9]*/i.test(b)&&(b={___id:b}),c.isArray(b)?(m(b,function(a){d.push(p(a))}),b=function(){var a=this,b=!1;return m(d,function(c){q(a,c)&&(b=!0)}),b}):c.isObject(b)?(c.isObject(b)&&b.___id&&b.___s&&(b={___id:b.___id}),n(b,function(b,e){c.isObject(b)||(b={is:b}),n(b,function(b,f){var g,h=[];g="hasAll"===f?function(a,b){b(a)}:m,g(b,function(b){var d,g=!0;d=function(){var d,h=this[e],i="==",j="!=",k="===",l="<",m=">",n="<=",o=">=",p="!==";return"undefined"==typeof h?!1:(0===f.indexOf("!")&&f!==j&&f!==p&&(g=!1,f=f.substring(1,f.length)),d="regex"===f?b.test(h):"lt"===f||f===l?b>h:"gt"===f||f===m?h>b:"lte"===f||f===n?b>=h:"gte"===f||f===o?h>=b:"left"===f?0===(""+h).indexOf(b):"leftnocase"===f?0===(""+h).toLowerCase().indexOf(b.toLowerCase()):"right"===f?(""+h).substring((""+h).length-b.length)===b:"rightnocase"===f?(""+h).toLowerCase().substring((""+h).length-b.length)===b.toLowerCase():"like"===f?(""+h).indexOf(b)>=0:"likenocase"===f?(""+h).toLowerCase().indexOf(b.toLowerCase())>=0:f===k||"is"===f?h===b:f===i?h==b:f===p?h!==b:f===j?h!=b:"isnocase"===f?h.toLowerCase?h.toLowerCase()===b.toLowerCase():h===b:"has"===f?c.has(h,b):"hasall"===f?c.hasAll(h,b):"contains"===f?a.isArray(h)&&h.indexOf(b)>-1:-1!==f.indexOf("is")||a.isNull(h)||a.isUndefined(h)||a.isObject(b)||a.isArray(b)?c[f]&&c.isFunction(c[f])&&0===f.indexOf("is")?c[f](h)===b:c[f]&&c.isFunction(c[f])?c[f](h,b):!1:b===h[f],d=d&&!g?!1:d||g?d:!0)},h.push(d)}),d.push(1===h.length?h[0]:function(){var a=this,b=!1;return m(h,function(c){c.apply(a)&&(b=!0)}),b})})}),b=function(){var a=this,b=!0;return b=(1!==d.length||d[0].apply(a))&&(2!==d.length||d[0].apply(a)&&d[1].apply(a))&&(3!==d.length||d[0].apply(a)&&d[1].apply(a)&&d[2].apply(a))&&(4!==d.length||d[0].apply(a)&&d[1].apply(a)&&d[2].apply(a)&&d[3].apply(a))?!0:!1,d.length>4&&m(d,function(c){q(a,c)||(b=!1)}),b}):c.isFunction(b)?b:void 0},s=function(b,d){var e=function(b,e){var f=0;return c.each(d,function(d){var g,h,i,j,k;if(g=d.split(" "),h=g[0],i=1===g.length?"logical":g[1],"logical"===i)j=r(b[h]),k=r(e[h]),c.each(j.length<=k.length?j:k,function(b,c){return j[c]<k[c]?(f=-1,a.EXIT):j[c]>k[c]?(f=1,a.EXIT):void 0});else if("logicaldesc"===i)j=r(b[h]),k=r(e[h]),c.each(j.length<=k.length?j:k,function(b,c){return j[c]>k[c]?(f=-1,a.EXIT):j[c]<k[c]?(f=1,a.EXIT):void 0});else{if("asec"===i&&b[h]<e[h])return f=-1,c.EXIT;if("asec"===i&&b[h]>e[h])return f=1,c.EXIT;if("desc"===i&&b[h]>e[h])return f=-1,c.EXIT;if("desc"===i&&b[h]<e[h])return f=1,c.EXIT}return 0===f&&"logical"===i&&j.length<k.length?f=-1:0===f&&"logical"===i&&j.length>k.length?f=1:0===f&&"logicaldesc"===i&&j.length>k.length?f=-1:0===f&&"logicaldesc"===i&&j.length<k.length&&(f=1),0!==f?c.EXIT:void 0}),f};return b&&b.push?b.sort(e):b},function(){var a={},b=0;r=function(c){return b>j&&(a={},b=0),a["_"+c]||function(){var d,e,f,g=String(c),h=[],i="_",j="";for(d=0,e=g.length;e>d;d++)f=g.charCodeAt(d),f>=48&&57>=f||46===f?("n"!==j&&(j="n",h.push(i.toLowerCase()),i=""),i+=g.charAt(d)):("s"!==j&&(j="s",h.push(parseFloat(i)),i=""),i+=g.charAt(d));return h.push("n"===j?parseFloat(i):i.toLowerCase()),h.shift(),a["_"+c]=h,b++,h}()}}(),t=function(){this.context({results:this.getDBI().query(this.context())})},k.extend("filter",function(){var b=a.mergeObj(this.context(),{run:null}),c=[];return m(b.q,function(a){c.push(a)}),b.q=c,m(arguments,function(a){b.q.push(p(a)),b.filterRaw.push(a)}),this.getroot(b)}),k.extend("order",function(b){b=b.split(",");var c,d=[];return m(b,function(a){d.push(a.replace(/^\s*/,"").replace(/\s*$/,""))}),c=a.mergeObj(this.context(),{sort:null}),c.order=d,this.getroot(c)}),k.extend("limit",function(b){var c,d=a.mergeObj(this.context(),{});return d.limit=b,d.run&&d.sort&&(c=[],m(d.results,function(d,e){return e+1>b?a.EXIT:void c.push(d)}),d.results=c),this.getroot(d)}),k.extend("start",function(b){var c,d=a.mergeObj(this.context(),{});return d.start=b,d.run&&d.sort&&!d.limit?(c=[],m(d.results,function(a,d){d+1>b&&c.push(a)}),d.results=c):d=a.mergeObj(this.context(),{run:null,start:b}),this.getroot(d)}),k.extend("update",function(b,d,e){var f,g=!0,h={},i=arguments;return!a.isString(b)||2!==arguments.length&&3!==arguments.length?(h=b,2===i.length&&(g=d)):(h[b]=d,3===arguments.length&&(g=e)),f=this,t.call(this),m(this.context().results,function(b){var d=h;a.isFunction(d)?d=d.apply(a.mergeObj(b,{})):c.isFunction(d)&&(d=d(a.mergeObj(b,{}))),a.isObject(d)&&f.getDBI().update(b.___id,d,g)}),this.context().results.length&&this.context({run:null}),this}),k.extend("remove",function(a){var b=this,c=0;return t.call(this),m(this.context().results,function(a){b.getDBI().remove(a.___id),c++}),this.context().results.length&&(this.context({run:null}),b.getDBI().removeCommit(a)),c}),k.extend("count",function(){return t.call(this),this.context().results.length}),k.extend("callback",function(a,b){if(a){var c=this;setTimeout(function(){t.call(c),a.call(c.getroot(c.context()))},b||0)}return null}),k.extend("get",function(){return t.call(this),this.context().results}),k.extend("stringify",function(){return JSON.stringify(this.get())}),k.extend("first",function(){return t.call(this),this.context().results[0]||!1}),k.extend("last",function(){return t.call(this),this.context().results[this.context().results.length-1]||!1}),k.extend("sum",function(){var a=0,b=this;return t.call(b),m(arguments,function(c){m(b.context().results,function(b){a+=b[c]||0})}),a}),k.extend("min",function(a){var b=null;return t.call(this),m(this.context().results,function(c){(null===b||c[a]<b)&&(b=c[a])}),b}),function(){var b=function(){var b,c,d;return b=function(a,b,c){var d,e,f;switch(2===c.length?(d=a[c[0]],f="===",e=b[c[1]]):(d=a[c[0]],f=c[1],e=b[c[2]]),f){case"===":return d===e;case"!==":return d!==e;case"<":return e>d;case">":return d>e;case"<=":return e>=d;case">=":return d>=e;case"==":return d==e;case"!=":return d!=e;default:throw String(f)+" is not supported"}},c=function(b,c){var d,e,f={};for(d in b)b.hasOwnProperty(d)&&(f[d]=b[d]);for(d in c)c.hasOwnProperty(d)&&"___id"!==d&&"___s"!==d&&(e=a.isUndefined(f[d])?"":"right_",f[e+String(d)]=c[d]);return f},d=function(d){var e,f,g=arguments,h=g.length,i=[];if("function"!=typeof d.filter){if(!d.TAFFY)throw"TAFFY DB or result not supplied";e=d()}else e=d;return this.context({results:this.getDBI().query(this.context())}),a.each(this.context().results,function(a){e.each(function(d){var e,j=!0;for(f=1;h>f&&(e=g[f],j="function"==typeof e?e(a,d):"object"==typeof e&&e.length?b(a,d,e):!1);f++);j&&i.push(c(a,d))})}),a(i)()}}();k.extend("join",b)}(),k.extend("max",function(a){var b=null;return t.call(this),m(this.context().results,function(c){(null===b||c[a]>b)&&(b=c[a])}),b}),k.extend("select",function(){var a=[],b=arguments;return t.call(this),1===arguments.length?m(this.context().results,function(c){a.push(c[b[0]])}):m(this.context().results,function(c){var d=[];m(b,function(a){d.push(c[a])}),a.push(d)}),a}),k.extend("distinct",function(){var b=[],c=arguments;return t.call(this),1===arguments.length?m(this.context().results,function(d){var e=d[c[0]],f=!1;m(b,function(b){return e===b?(f=!0,a.EXIT):void 0}),f||b.push(e)}):m(this.context().results,function(d){var e=[],f=!1;m(c,function(a){e.push(d[a])}),m(b,function(b){var d=!0;return m(c,function(c,f){return e[f]!==b[f]?(d=!1,a.EXIT):void 0}),d?(f=!0,a.EXIT):void 0}),f||b.push(e)}),b}),k.extend("supplant",function(a,b){var c=[];return t.call(this),m(this.context().results,function(b){c.push(a.replace(/\{([^\{\}]*)\}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a}))}),b?c:c.join("")}),k.extend("each",function(a){return t.call(this),m(this.context().results,a),this}),k.extend("map",function(a){var b=[];return t.call(this),m(this.context().results,function(c){b.push(a(c))}),b}),c=function(b){var d,e,f,g=[],j={},r=1,t={template:!1,onInsert:!1,onUpdate:!1,onRemove:!1,onDBChange:!1,storageName:!1,forcePropertyCase:null,cacheSize:100,name:""},u=new Date,v=0,x=0,y={};return e=function(a){var b=[],d=!1;return 0===a.length?g:(m(a,function(a){c.isString(a)&&/[t][0-9]*[r][0-9]*/i.test(a)&&g[j[a]]&&(b.push(g[j[a]]),d=!0),c.isObject(a)&&a.___id&&a.___s&&g[j[a.___id]]&&(b.push(g[j[a.___id]]),d=!0),c.isArray(a)&&m(a,function(a){m(e(a),function(a){b.push(a)})})}),d&&b.length>1&&(b=[]),b)},d={dm:function(a){return a&&(u=a,y={},v=0,x=0),t.onDBChange&&setTimeout(function(){t.onDBChange.call(g)},0),t.storageName&&setTimeout(function(){localStorage.setItem("taffy_"+t.storageName,JSON.stringify(g))}),u},insert:function(b,e){var k=[],o=[],p=l(b);return m(p,function(b,f){var l,p;return c.isArray(b)&&0===f?(m(b,function(a){k.push("lower"===t.forcePropertyCase?a.toLowerCase():"upper"===t.forcePropertyCase?a.toUpperCase():a)}),!0):(c.isArray(b)?(l={},m(b,function(a,b){l[k[b]]=a}),b=l):c.isObject(b)&&t.forcePropertyCase&&(p={},n(b,function(a,c){p["lower"===t.forcePropertyCase?c.toLowerCase():"upper"===t.forcePropertyCase?c.toUpperCase():c]=b[c]}),b=p),r++,b.___id="T"+String(i+h).slice(-6)+"R"+String(i+r).slice(-6),b.___s=!0,o.push(b.___id),t.template&&(b=c.mergeObj(t.template,b)),g.push(b),j[b.___id]=g.length-1,t.onInsert&&(e||a.isUndefined(e))&&t.onInsert.call(b),void d.dm(new Date))}),f(o)},sort:function(a){return g=s(g,a.split(",")),j={},m(g,function(a,b){j[a.___id]=b}),d.dm(new Date),!0},update:function(b,e,f){var h,i,k,l,m={};t.forcePropertyCase&&(n(e,function(a,b){m["lower"===t.forcePropertyCase?b.toLowerCase():"upper"===t.forcePropertyCase?b.toUpperCase():b]=a}),e=m),h=g[j[b]],i=c.mergeObj(h,e),k={},l=!1,n(i,function(b,c){(a.isUndefined(h[c])||h[c]!==b)&&(k[c]=b,l=!0)}),l&&(t.onUpdate&&(f||a.isUndefined(f))&&t.onUpdate.call(i,g[j[b]],k),g[j[b]]=i,d.dm(new Date))},remove:function(a){g[j[a]].___s=!1},removeCommit:function(b){var c;for(c=g.length-1;c>-1;c--)g[c].___s||(t.onRemove&&(b||a.isUndefined(b))&&t.onRemove.call(g[c]),j[g[c].___id]=void 0,g.splice(c,1));j={},m(g,function(a,b){j[a.___id]=b}),d.dm(new Date)},query:function(b){var f,h,i,j,k,l;if(t.cacheSize&&(h="",m(b.filterRaw,function(b){return c.isFunction(b)?(h="nocache",a.EXIT):void 0}),""===h&&(h=w(c.mergeObj(b,{q:!1,run:!1,sort:!1})))),!b.results||!b.run||b.run&&d.dm()>b.run){if(i=[],t.cacheSize&&y[h])return y[h].i=v++,y[h].results;0===b.q.length&&0===b.index.length?(m(g,function(a){i.push(a)}),f=i):(j=e(b.index),m(j,function(a){(0===b.q.length||q(a,b.q))&&i.push(a)}),f=i)}else f=b.results;return!(b.order.length>0)||b.run&&b.sort||(f=s(f,b.order)),f.length&&(b.limit&&b.limit<f.length||b.start)&&(k=[],m(f,function(c,d){if(!b.start||b.start&&d+1>=b.start)if(b.limit){if(l=b.start?d+1-b.start:d,l<b.limit)k.push(c);else if(l>b.limit)return a.EXIT}else k.push(c)}),f=k),t.cacheSize&&"nocache"!==h&&(x++,setTimeout(function(){var a,b;x>=2*t.cacheSize&&(x=0,a=v-t.cacheSize,b={},n(function(c,d){c.i>=a&&(b[d]=c)}),y=b)},0),y[h]={i:v++,results:f}),f}},f=function(){var b,c;return b=a.mergeObj(a.mergeObj(k,{insert:void 0}),{getDBI:function(){return d},getroot:function(a){return f.call(a)},context:function(b){return b&&(c=a.mergeObj(c,b.hasOwnProperty("results")?a.mergeObj(b,{run:new Date,sort:new Date}):b)),c},extend:void 0}),c=this&&this.q?this:{limit:!1,start:!1,q:[],filterRaw:[],index:[],order:[],results:!1,run:null,sort:null,settings:t},m(arguments,function(a){o(a)?c.index.push(a):c.q.push(p(a)),c.filterRaw.push(a)}),b},h++,b&&d.insert(b),f.insert=d.insert,f.merge=function(a,b,c){var e={},g=[],h={};return c=c||!1,b=b||"id",m(a,function(a){var h;e[b]=a[b],g.push(a[b]),h=f(e).first(),h?d.update(h.___id,a,c):d.insert(a,c)}),h[b]=g,f(h)},f.TAFFY=!0,f.sort=d.sort,f.settings=function(b){return b&&(t=a.mergeObj(t,b),b.template&&f().update(b.template)),t},f.store=function(a){var b,c=!1;return localStorage&&(a&&(b=localStorage.getItem("taffy_"+a),b&&b.length>0&&(f.insert(b),c=!0),g.length>0&&setTimeout(function(){localStorage.setItem("taffy_"+t.storageName,JSON.stringify(g))})),f.settings({storageName:a})),f},f},a=c,c.each=m,c.eachin=n,c.extend=k.extend,a.EXIT="TAFFYEXIT",a.mergeObj=function(a,b){var c={};return n(a,function(b,d){c[d]=a[d]}),n(b,function(a,d){c[d]=b[d]}),c},a.has=function(b,d){var e,f=!1;if(b.TAFFY)return f=b(d),f.length>0?!0:!1;switch(c.typeOf(b)){case"object":if(c.isObject(d))n(d,function(e,g){return f!==!0||c.isUndefined(b[g])||!b.hasOwnProperty(g)?(f=!1,a.EXIT):void(f=c.has(b[g],d[g]))});else if(c.isArray(d))m(d,function(e,g){return f=c.has(b,d[g]),f?a.EXIT:void 0});else if(c.isString(d))return a.isUndefined(b[d])?!1:!0;return f;case"array":if(c.isObject(d))m(b,function(e,g){return f=c.has(b[g],d),f===!0?a.EXIT:void 0});else if(c.isArray(d))m(d,function(e,g){return m(b,function(e,h){return f=c.has(b[h],d[g]),f===!0?a.EXIT:void 0}),f===!0?a.EXIT:void 0});else if(c.isString(d)||c.isNumber(d))for(f=!1,e=0;e<b.length;e++)if(f=c.has(b[e],d))return!0;return f;case"string":if(c.isString(d)&&d===b)return!0;break;default:if(c.typeOf(b)===c.typeOf(d)&&b===d)return!0}return!1},a.hasAll=function(b,c){var d,e=a;return e.isArray(c)?(d=!0,m(c,function(c){return d=e.has(b,c),d===!1?a.EXIT:void 0}),d):e.has(b,c)},a.typeOf=function(a){var b=typeof a;return"object"===b&&(a?"number"!=typeof a.length||a.propertyIsEnumerable("length")||(b="array"):b="null"),b},a.getObjectKeys=function(a){var b=[];return n(a,function(a,c){b.push(c)}),b.sort(),b},a.isSameArray=function(b,c){return a.isArray(b)&&a.isArray(c)&&b.join(",")===c.join(",")?!0:!1},a.isSameObject=function(b,c){var d=a,e=!0;return d.isObject(b)&&d.isObject(c)&&d.isSameArray(d.getObjectKeys(b),d.getObjectKeys(c))?n(b,function(f,g){return d.isObject(b[g])&&d.isObject(c[g])&&d.isSameObject(b[g],c[g])||d.isArray(b[g])&&d.isArray(c[g])&&d.isSameArray(b[g],c[g])||b[g]===c[g]?void 0:(e=!1,a.EXIT)}):e=!1,e},b=["String","Number","Object","Array","Boolean","Null","Function","Undefined"],d=function(b){return function(c){return a.typeOf(c)===b.toLowerCase()?!0:!1}},e=0;e<b.length;e++)f=b[e],a["is"+f]=d(f)}(),"object"==typeof b&&(b.taffy=a);var d=function(){};d.prototype.init=function(a,b,c){var d=this;this.callback_context=c,this.filter={},this.pagination={page:1},this._loadOptions(b),this._buildAdvancedEdit(),this._buildRowEditor(),this._buildTableStructure(a),this._setDomMap(a),this._addEventHandlers(),this._saveMap={},this.newTable(),setTimeout(function(){d._emitCallback("onCreate"),d.saveStatus()},0)},d.prototype._loadOptions=function(a){var b,c=e.inherit(a),d={class_prefix:"div",select_class:"select",edit_class:"edit",filter_class:"filter",hide_class:"hide",disable_class:"disable",columns:[{name:"first",text:"first",edit:"text"},{name:"second",text:"second",edit:["0","1","2"]}],footer:["plus","trash"],counter_text:"Entry {{total}}",pagination_page:"Page",pagination_total:"of",order:"id",show_filter:!1,auto_edit:!0,disable_footer:!1,pagination:!1,menu:'<ul id="configMenuUl" styel="width:120px"><li id="menuitem-headerfilter"><a href="#"><span class="ui-icon ui-icon-filter"></span>Sofort Filter</a></li></ul>',advancedEdit:null,onChange:function(){},onSelectRow:function(){},onFooterClick:function(a){"plus"===a?this.div_table("newRow"):"trash"===a?this.div_table("deleteEditRow"):"refresh"===a&&this.div_table("updateTable")}};for(b in d)d.hasOwnProperty(b)&&void 0===c[b]&&(c[b]=d[b]);this.options=c},d.prototype._emitCallback=function(a,b){var c;if("function"==typeof this.options[a]){switch(a){case"onCreate":c=[];break;case"onFooterClick":c=[b];break;case"onSelectRow":c=[b];break;case"onChange":c=b;break;default:c=[]}this.options[a].apply(this.callback_context,c)}},d.prototype._getRows=function(a){var b;return b=e.extend(this.filter,{deleted:"false"}),e.isObject(a)&&(b=e.extend(b,a)),this.table(b).order(this.options.order||"id").get()},d.prototype._getRowById=function(a){var b=this._getRows({id:1*a})[0];return b||(b=this._getRows({id:""+a})[0]),b},d.prototype._insertRow=function(a){var b,c,d=this.options.columns;for(a.deleted="false",a.edited="false",a.new="true",a.id=a.id||(""+Math.random().toFixed(15)).slice(-15),this._checkRowValues(a),b=0,c=d.length;c>b;b++)a.hasOwnProperty(d[b].name)||(a[d[b].name]="");this.table.insert(a)},d.prototype._updateRow=function(a,b,c){this.table({id:""+a}).first()?a=""+a:a*=1,c||this.table({id:a,"new":"false",edited:"false"}).update({edited:"true"}),this.table({id:a}).update(b)},d.prototype._deleteRow=function(a,b){this.table({id:""+a}).first()?a=""+a:a*=1,!b&&this.table({id:a,"new":"false"}).count()?this.table({id:a}).update({deleted:"true"}):this.table({id:a}).remove()},d.prototype._checkRowValues=function(a){var b,c,d,f,g,h;b=this.edit.getEdit(a);for(g in b)if(b.hasOwnProperty(g))if(e.isObject(b[g])){if(!b[g].hasOwnProperty(a[g])){for(h in b[g])if(g.hasOwnProperty(h))break;a[g]=h}}else e.isArray(b[g])&&(e.inArray(a[g],b[g])||(a[g]=b[g][0]));for(c=this.edit.getHidden(a),d=0,f=c.length;f>d;d++)a[c[d]]=null},d.prototype._getUniqueValues=function(a,b,c,d){var f,g,h,i,j,k={},l=e.clone(c);if(!a)return l;if(d&&(k[d]={isnocase:a[d]}),f=this._getRows(k),g=e.getArrayByKey(f,b),e.isArray(l)){a:for(h=0,j=g.length;j>h;++h)if(g[h]!==a[b])for(i=l.length;i--;)if(g[h]===l[i]){l.splice(i,1);continue a}}else if(e.isObject(l))for(h=0,j=g.length;j>h;++h)g[h]!==a[b]&&l.hasOwnProperty(g[h])&&delete l[g[h]];return l},d.prototype._buildAdvancedEdit=function(){var a,b,c=this,d=this.options.advancedEdit,f=function(b,c){var d,e,g=new a(b.edit,b.hide,b.depend);if(b.values)for(d=0,e=b.values.length;e>d;++d)f(b.values[d],g);return c?(c.addChild(b.value,b.invert||!1,g),c):g};a=function(a,b,c){this.edit=a||{},this.hide=b||[],this.depend=c,this.children=[]},a.prototype={getEdit:function(a){if(this.depend){var b=this.getChild(a);return b?e.extend(this.edit,b.getEdit(a)):e.clone(this.edit)}return e.clone(this.edit)},getHidden:function(a){if(this.depend){var b=this.getChild(a);return b?this.hide.concat(b.getHidden(a)):this.hide}return this.hide},getDepend:function(){var a,b,c=this.depend?[this.depend]:[];if(this.children.length)for(a=0,b=this.children.length;b>a;++a)c=c.concat(this.children[a].child.getDepend());return c},addChild:function(a,b,c){this.children.push({value:a,invert:b,child:c})},getChild:function(a){var b,c,d,f=this.depend,g=a[f];for(b=0,c=this.children.length;c>b;++b)if(d=this.children[b],!d.invert!=!(d.value===g||e.inArray(g,d.value)))return d.child}},b=f(d||{});var g=function(a){this.edit=a};g.prototype={getEdit:function(){var a,b,d,e,f=arguments[0],g=arguments[1]||!1,h=c.options.columns,i=this.edit.getEdit.apply(this.edit,arguments);for(a=0,b=h.length;b>a;a++)d=h[a].name,i[d]||(i[d]=h[a].edit),!g&&h[a].unique&&(i[d]=c._getUniqueValues(f,d,i[d])),"function"==typeof i[d]&&(i[d]=i[d](f));for(e=this.getHidden.apply(this,arguments),a=0,b=e.length;b>a;a++)i[e[a]]&&(i[e[a]]="hidden");return i},getHidden:function(){return this.edit.getHidden.apply(this.edit,arguments)},getDepend:function(){return this.edit.getDepend.apply(this.edit,arguments)}},this.edit=new g(b)},d.prototype._buildRowEditor=function(){var a,b,c,d,f,g,h,i,j,k,l=this;a=function(){this.subscribed={}},a.prototype={subscribe:function(a,b,c){var d=(new Date).getTime();return this.subscribed.hasOwnProperty(a)||(this.subscribed[a]={}),this.subscribed[a][d]={fn:b,ctx:c||this},d},emit:function(a,b){var c,d;if(this.subscribed.hasOwnProperty(a))for(c in this.subscribed[a])this.subscribed[a].hasOwnProperty(c)&&(d=this.subscribed[a][c],d.fn.call(d.ctx,b))}},b=function(b,c){a.call(this);var d='[name="'+b+'"]';this.editor=null,this.column_name=b,this.editor_class=l.options.class_prefix+"-"+l.options.edit_class,this.row=c,this.cell=c?c.querySelector(d):null,this.editor=null},b.prototype=new a,b.prototype.constructor=b,b.prototype.getValue=function(){var a=this.row.id;return l._getRowById(a)[this.column_name]},b.prototype.setValue=function(a,b){var c=this.row.id,d={};d[this.column_name]=a,l._updateRow(c,d),b||this.emit("change",{column:this.column_name,value:a})},b.prototype.destroy=function(){this.editor&&this.editor.parentNode&&this.editor.parentNode.removeChild(this.editor)},b.prototype.init=function(){},b.prototype.update=function(a){this.cell&&(this.cell.innerHTML=a),this.setValue(a,!0)},c=function(a,c){b.call(this,a,c)},c.prototype=new b,c.prototype.constructor=c,c.prototype.init=function(){var a=this,b=this.getValue()||"",c=document.createElement("input");c.className=this.editor_class,c.setAttribute("type","text"),c.value=b,this.cell.insertBefore(c,this.cell.firstChild),this.editor=c,e.addEvent(c,"keyup",function(){a.setValue(this.value)})},d=function(a,c){b.call(this,a,c)},d.prototype=new b,d.prototype.constructor=d,d.prototype.init=function(){var a=this,b=this.getValue()||0,c=document.createElement("input");c.className=this.editor_class,c.setAttribute("type","number"),c.value=b,this.cell.insertBefore(c,this.cell.firstChild),this.editor=c,e.addEvent(c,"keyup",function(){a.setValue(this.value)})},f=function(a,c){b.call(this,a,c)},f.prototype=new b,f.prototype.constructor=f,f.prototype.init=function(a){var b,c,d,f,g=this,h=a.values||[],i=this.getValue(),j=document.createElement("select"),k=[],l=!1;for(j.className=this.editor_class,b=0,c=h.length;c>b;++b)d=h[b],d==i?(f='selected="selected"',l=!0):f="",k.push('<option value="'+d+'" '+f+' name="'+b+'">'+d+"</option>");e.addEvent(j,"change",function(){g.setValue(this.value)}),j.innerHTML=k.join(""),l||this.setValue(j.value),this.cell.insertBefore(j,this.cell.firstChild),this.editor=j},g=function(a,c){b.call(this,a,c)},g.prototype=new b,g.prototype.constructor=g,g.prototype.init=function(a){var b,c,d=this,f=a.values||[],g=this.getValue(),h=document.createElement("select"),i=[],j=!1;h.className=this.editor_class;for(b in f)f.hasOwnProperty(b)&&(b==g?(c='selected="selected"',j=!0):c="",i.push('<option value="'+b+'" '+c+">"+f[b]+"</option>"));e.addEvent(h,"change",function(){d.setValue(this.value)}),h.innerHTML=i.join(""),j||this.setValue(h.value),this.cell.insertBefore(h,this.cell.firstChild),this.editor=h},g.prototype.update=function(a){var b,c,d=this.editor.childNodes;for(b=0,c=d.length;c>b;b++)if(d[b].value===a){this.editor.selectedIndex=b;break}this.setValue(a,!0)},h=function(a,c){b.call(this,a,c)},h.prototype=new b,h.prototype.constructor=h,h.prototype.init=function(){var a=this,b=this.getValue()||"",c=document.createElement("input");c.className=this.editor_class,c.value=b,this.cell.insertBefore(c,this.cell.firstChild),this.editor=c,$(c).datetimepicker({showTimepicker:!1,onSelect:function(){a.setValue(this.value)}})},h.prototype.destroy=function(){$(this.editor).datetimepicker("destroy"),b.prototype.destroy.apply(this,arguments)},i=function(a,c){b.call(this,a,c)},i.prototype=new b,i.prototype.constructor=i,i.prototype.init=function(){var a,b=this,c=this.getValue()||"04:00",d=document.createElement("input");d.className=this.editor_class,d.value=c,this.cell.insertBefore(d,this.cell.firstChild),this.editor=d,a=new TimePicker({target:d,h_min:4,h_max:27}),a.subscribe("change",function(a){b.setValue(a)}),this.timePicker=a},i.prototype.destroy=function(){this.timePicker&&this.timePicker.destroy(),b.prototype.destroy.apply(this,arguments)},j=function(a,c){b.call(this,a,c)},j.prototype=new b,j.prototype.constructor=j,j.prototype.init=function(){var a=this,b=this.getValue()||!1,c=document.createElement("input");c.className=this.editor_class,c.setAttribute("type","checkbox"),c.checked=b,this.cell.insertBefore(c,this.cell.firstChild),this.editor=c,e.addEvent(c,"change",function(){a.setValue(this.checked)})},k=function(a,c){b.call(this,a,c)},k.prototype=new b,k.prototype.constructor=k,k.prototype.init=function(){var a=document.createElement("div");a.className=this.editor_class+"-hidden",this.cell.insertBefore(a,this.cell.firstChild),this.editor=a};var m=function(){this.editingId=null,this.editingMap={},this.onChange=null};m.prototype.getEditorType=function(a){var l,m;return"text"===a?(l="text",m=c):"number"===a?(l="number",m=d):e.isArray(a)?(l="select",m=f):e.isObject(a)?(l="advancedSelect",m=g):"date"===a?(l="date",m=h):"time"===a?(l="time",m=i):"checkbox"===a?(l="checkbox",m=j):"hidden"===a?(l="hidden",m=k):(l="none",m=b),{type:l,Constructor:m}},m.prototype._editCell=function(a,b){var c,d=this.getEditorType(b),e=d.type;c=new d.Constructor(a,this.row),c.init({values:b}),this.addChangeHandler(c),this.editingMap[a]={type:e,editor:c}},m.prototype.start=function(a,b){var c;if(this.editingId!==a.id){this.editingId&&this.end(),this.row=a,this.editingId=a.id,this.editingMap={};for(c in b)b.hasOwnProperty(c)&&this._editCell(c,b[c])}},m.prototype.change=function(a){var b,c,d,e;if(this.editingId)for(b in a)a.hasOwnProperty(b)&&(c=a[b],d=this.getEditorType(a[b]),e=d.type,(this.editingMap[b].type!==e||"select"===e||"advancedSelect"===e)&&(this.editingMap[b].editor.destroy(),this._editCell(b,a[b])))},m.prototype.end=function(){var a,b;for(a in this.editingMap)this.editingMap.hasOwnProperty(a)&&(b=this.editingMap[a].editor,b.destroy(),delete this.editingMap[a]);this.editingId&&("function"==typeof this.onEnd&&this.onEnd.call(l,this.row),l._updateHtmlRow(this.editingId)),this.row=null,this.editingId=null},m.prototype.addChangeHandler=function(a){a.subscribe("change",function(a){"function"==typeof this.onChange&&this.onChange.call(l,a.column,a.value)},this)},m.prototype.getRow=function(){return this.row},m.prototype.getRowId=function(){return this.editingId},m.prototype.updateRow=function(a){var b;for(b in a)a.hasOwnProperty(b)&&this.editingMap.hasOwnProperty(b)&&this.editingMap[b].editor.update(a[b])},this._editor=new m},d.prototype._editRow=function(a){var b,c;"string"==typeof a&&(a=this.findRowById(a)),b=this._getRowById(a.id),c=this.edit.getEdit(b),this._editor.start(a,c),this._editor.onChange=function(b,c){var d,f=this.edit.getDepend(),g=this._getRowById(a.id),h=this.edit.getEdit(g);e.inArray(b,f)&&(this._editor.change(h),d=this._getRowById(a.id),d&&this._checkRowValues(d)),this._emitCallback("onChange",[b,c,a])},this._editor.onEnd=function(a){if(a){var b=a.id,c=this._getRowById(b);c&&this._checkRowValues(c),this._editor.onEnd=null}}},d.prototype._buildTableStructure=function(a){var b,c,d,f,g,h,i,j,k,l=this.options.class_prefix,m=this.options.columns,n=this.options.footer,o=this.options.disable_footer?l+"-"+this.options.disable_class:"",p=e.getScrollWidth();for(a.innerHTML="",a.classList.add(l+"-table"),f=[],b=0,c=m.length;c>b;++b)h=m[b],f.push(""+(h.name?'id="'+h.name+'"':"")+'class="'+l+"-cell cell-"+b+'">'+h.text);for(d='<div class="'+l+'-header"><div '+f.join("</div><div ")+"</div>",a.innerHTML+=d,f=[],b=0,c=m.length;c>b;++b)h=m[b],f.push(""+(h.name?'id="'+h.name+'"':"")+'class="'+l+"-cell cell-"+b+'"><input></input>');for(d='<div class="'+l+'-header-filter"><div '+f.join("</div><div ")+"</div>",a.innerHTML+=d,d='<div class="'+l+'-body"></div>',a.innerHTML+=d,g=[],b=0,c=n.length;c>b;++b)h=n[b],g.push('class="ui-state-default '+l+"-footer-button "+o+'" name="'+h+'"><span class="ui-icon ui-icon-'+h+'"></span>');d='<div class="'+l+'-footer">'+(g.length?"<div "+g.join("</div><div ")+"</div>":""),this.options.pagination&&(d+='<div class="'+l+'-pages"><div class="'+l+"-pages-first "+l+'-footer-button" name="first"><span class="ui-icon ui-icon-seek-first"></span></div><div class="'+l+"-pages-prev  "+l+'-footer-button" name="prev" ><span class="ui-icon ui-icon-seek-prev" ></span></div><div class="'+l+'-pages-curr" ><div class="'+l+'-pages-curr-page" >'+this.options.pagination_page+'</div><input class="'+l+'-pages-curr-input"></input><div class="'+l+'-pages-curr-ttext">'+this.options.pagination_total+'</div><div class="'+l+'-pages-curr-total"> 0 </div></div><div class="'+l+"-pages-next  "+l+'-footer-button" name="next" ><span class="ui-icon ui-icon-seek-next"></span></div><div class="'+l+"-pages-end   "+l+'-footer-button" name="end"  ><span class="ui-icon ui-icon-seek-end" ></span></div></div>'),d+='<div class="'+l+'-footer-counter"></div></div',a.innerHTML+=d,d='<div class="'+l+'-filter"><span></span></div>',a.innerHTML+=d,a.style.position="relative",i=a.querySelector("."+l+"-header"),i.style.width="-webkit-calc(100% - "+p+"px)",i.style.width="calc(100% - "+p+"px)",j=a.querySelector("."+l+"-header-filter"),j.style.width="-webkit-calc(100% - "+p+"px)",j.style.width="calc(100% - "+p+"px)",k=a.querySelector("."+l+"-filter"),k.style.width=p+"px"},d.prototype._getRowHtml=function(a){var b,c,d,f,g,h,i,j=this.options.columns,k=this.options.class_prefix,l=[],m="";if(null!==a&&e.isObject(a)){for(this.edit?(f=this.edit.getEdit(a,!0),d=this.edit.getHidden(a)):(f={},d=[]),b=0,c=j.length;c>b;b++)g=j[b].name,h=i=null==a[g]?"":a[g]!==!1?a[g]:"",e.isObject(f[g])&&(i=f[g][h],void 0===i&&(i=h)),l.push('class="'+k+"-cell cell-"+b+'" name="'+g+'"><div class="cell-val" value="'+h+'">'+i+"</div>");m='<div class="'+k+'-row" id="'+a.id+'"><div '+l.join("</div><div ")+"</div></div>"}return m},d.prototype._getRowsHtml=function(){var a,b,c,d=this._getRows(),e="";for(this.options.pagination&&(c=this._getRowsInterval(),d=d.slice(c.start,c.stop)),a=0,b=d.length;b>a;a++)e+=this._getRowHtml(d[a]);return e},d.prototype._selectRow=function(a){var b,c,d,e=this.domMap.body,f=this.options.select_class;if("string"==typeof a&&(a=this.findRowById(a)),a&&!a.classList.contains(f)){for(d=e.querySelectorAll("."+f),b=0,c=d.length;c>b;b++)d[b].classList.remove(f);a.classList.add(f),this._scrollToRow(a),this._emitCallback("onSelectRow",a),this.options.auto_edit&&this._editRow(a.id)}},d.prototype._getSelectedRow=function(){var a=this.domMap.body,b=this.options.select_class,c=a.querySelectorAll("."+b);return c[0]||{}},d.prototype._scrollToRow=function(a){var b,c,d,e,f=20,g=3,h=this,i=this.domMap.body,j=i.scrollTop,k=i.offsetHeight,l=a.offsetTop-i.offsetTop,m=a.offsetHeight;if(!this._isScrolling){if(c=j,j>l)d=l;else{if(!(l+m>j+k))return;d=l-k+m}e=c>d?-g*f:g*f,this._isScrolling=!0,b=setInterval(function(){i.scrollTop+=e,(e>0&&i.scrollTop>=d||0>=e&&i.scrollTop<=d)&&(i.scrollTop=d,clearInterval(b),h._isScrolling=!1)},f)}},d.prototype._setDomMap=function(a){var b=this.options.class_prefix;this.domMap={table:a,body:a.querySelector("."+b+"-body"),filter_btn:a.querySelector("."+b+"-filter"),footer_count:a.querySelector("."+b+"-footer-counter"),filter_inputs:a.querySelectorAll("."+b+"-header-filter input"),footer_btns:a.querySelectorAll("."+b+"-footer-button"),page_first:a.querySelector("."+b+"-pages-first"),page_prev:a.querySelector("."+b+"-pages-prev"),page_next:a.querySelector("."+b+"-pages-next"),page_end:a.querySelector("."+b+"-pages-end"),page_curr:a.querySelector("."+b+"-pages-curr-input"),page_total:a.querySelector("."+b+"-pages-curr-total")}
},d.prototype._addEventHandlers=function(){var a=this,b=this.options.class_prefix,c=this.domMap.body,d=this.domMap.filter_inputs,f=this.domMap.footer_btns,g=this.domMap.filter_btn;e.addEvent(d,"keyup",function(){var b=this.parentNode.id,c=this.value;a._updateFilter(b,c)}),f.length&&e.addEvent(f,"mousedown",function(){a._footerBtnClick.call(a,this)}),e.addEvent(g,"click",function(b){a._showFilterMenu(b,this)}),e.addEvent(c,"click",function(c){var d,e=b+"-row",f=function(a,b){return a?a.classList&&a.classList.contains(b)?a:f(a.parentNode,b):null};d=c.target.classList.contains(e)?c.target:f(c.target.parentNode,e),d&&a._selectRow.call(a,d)})},d.prototype._updateCounterText=function(){var a,b,c=this.options.counter_text,d=this.getRowCount(),e={from:1,to:d,total:d};this.options.pagination&&(b=this._getRowsInterval(),e.from=Math.max(1,b.start+1),e.to=Math.min(b.stop,d));for(a in e)e.hasOwnProperty(a)&&(c=c.split("{{"+a+"}}").join(e[a]));return this.domMap.footer_count.innerHTML=c,c},d.prototype._updateTable=function(){this.endEditRow(),this.domMap.body.innerHTML=this._getRowsHtml(),this._updateCounterText(),this._updatePagination()},d.prototype._updateHtmlRow=function(a){var b,c,d,e,f=this.options.select_class,g=!1;"string"==typeof a&&(a=this.findRowById(a)),g=a.classList.contains(f),b=this._getRowById(a.id),b&&(this._checkRowValues(b),c=this._getRowHtml(b),d=document.createElement("div"),d.innerHTML=c,e=d.firstChild,a.parentNode.replaceChild(e,a),g&&e.classList.add(f))},d.prototype._footerBtnClick=function(a){var b=this.options.class_prefix,c=b+"-"+this.options.disable_class,d=a.getAttribute("name");a.classList.contains(c)||(a.parentNode.classList.contains(b+"-pages")?this._pagesBtnClick.call(this,a):this._emitCallback("onFooterClick",d))},d.prototype._pagesBtnClick=function(a){var b=this.options.class_prefix,c=(b+"-"+this.options.disable_class,a.getAttribute("name"));switch(c){case"first":this._showFirstPage();break;case"prev":this._showPrevPage();break;case"next":this._showNextPage();break;case"end":this._showEndPage();break;default:console.warn("Button with name %s not known!",c)}},d.prototype._showFilterMenu=function(a,b){this.options.showFilterMenu?(this.options.showFilterMenu.call(this.domMap.table,a,b),console.log("custom filter")):this.domMap.table.classList.toggle(this.options.filter_class)},d.prototype.setFilter=function(a){this.filter=a||{}},d.prototype.editFilter=function(a,b){this.filter[a]={likenocase:""+b}},d.prototype.removeFilter=function(a){delete this.filter[a]},d.prototype._updateFilter=function(a,b){this.editFilter(a,b),this._updateTable()},d.prototype._showFirstPage=function(){1!==this.pagination&&(this.pagination.page=1,this._updateTable())},d.prototype._showPrevPage=function(){this.pagination.page>1&&(this.pagination.page--,this._updateTable())},d.prototype._showNextPage=function(){var a=this._getPagesCount();this.pagination.page<a&&(this.pagination.page++,this._updateTable())},d.prototype._showEndPage=function(){var a=this._getPagesCount();this.pagination.page!==a&&(this.pagination.page=a,this._updateTable())},d.prototype._getPagesCount=function(){var a=this._getRowsInPage(),b=this._getRows().length;return Math.ceil(b/a)},d.prototype._getRowsInPage=function(){return this.pagination.rows_pro_page||this._calcRowsInPage(),this.pagination.rows_pro_page},d.prototype._calcRowsInPage=function(){var a,b,c,d,e=this.domMap.body,f=e.querySelector("."+this.options.class_prefix+"-row");return f?(c=e.offsetHeight,d=f.offsetHeight,void(this.pagination.rows_pro_page=Math.floor(c/d))):(a="row-"+(new Date).getTime(),f=this._getRowHtml({id:a}),this.domMap.body.innerHTML+=f,b=this._getRowsInPage(),f=e.querySelector("#"+a),f.parentNode.removeChild(f),b)},d.prototype._getRowsInterval=function(){var a=this._getRowsInPage(),b=a*(this.pagination.page-1);return{start:b,stop:b+a}},d.prototype._updatePagination=function(){if(this.options.pagination){var a=this._getPagesCount();this.domMap.page_curr.value=this.pagination.page,this.domMap.page_total.innerHTML=a,this._updatePageButtons()}},d.prototype._updatePageButtons=function(){var a=this.pagination.page,b=this._getPagesCount();a>1?this._enablePageButtons(["first","prev"]):this._disablePageButtons(["first","prev"]),b>a?this._enablePageButtons(["end","next"]):this._disablePageButtons(["end","next"])},d.prototype._enablePageButtons=function(a){var b,c,d,e=this.options.class_prefix+"-"+this.options.disable_class;for(b=0,c=a.length;c>b;b++)d=this.domMap["page_"+a[b]],d.classList.remove(e)},d.prototype._disablePageButtons=function(a){var b,c,d,e=this.options.class_prefix+"-"+this.options.disable_class;for(b=0,c=a.length;c>b;b++)d=this.domMap["page_"+a[b]],d.classList.add(e)},d.prototype._onResize=function(){var a;a=this._getRowsInPage(),this._calcRowsInPage(),a!==this._getRowsInPage()&&this._updateTable()},d.prototype.getRowCount=function(a){var b=0;return a?(this.table=this._saveMap[a],b=this._getRows().length,this.table=this._saveMap[this._currentTableId]):b=this._getRows().length,b},d.prototype.getRows=function(a){return this._getRows(a)},d.prototype.getRowById=function(a){return this._getRowById(a)},d.prototype.getRowValues=function(a){var b=a||this._getSelectedRow().id||"",c=this._getRowById(b);return c||{}},d.prototype.selectRow=function(a){this._selectRow(a)},d.prototype.editRow=function(a){var b=a||this._getSelectedRow().id;this._editRow(""+b)},d.prototype.endEditRow=function(){this._editor.end()},d.prototype.newRow=function(a){a=a||{},this._insertRow(a),this._updateTable()},d.prototype.newRows=function(a){var b,c=a.length;for(b=0;c>b;b++)this._insertRow(a[b]);this._updateTable()},d.prototype.updateRow=function(a,b,c,d){this._updateRow(a,b,d),c?this._editor.getRowId()==a?this._editor.updateRow(b):this._updateHtmlRow(""+a):(this._editor.end(),this._updateTable())},d.prototype.deleteRow=function(a,b){var c=this.findNextRow(a);this._editor.getRowId()===a&&this._editor.end(),this._deleteRow(a,b),this._updateTable(),this._selectRow(""+c.id)},d.prototype.deleteRows=function(a,b){var c,d;for(c=0,d=a.length-1;d>c;c++)this._deleteRow(a[c].id||a[c],b);this.deleteRow(a[c].id||a[c],b)},d.prototype.deleteEditRow=function(){if(this._editor.getRow()){var a=this._editor.getRowId();this.deleteRow(a)}},d.prototype.deleteSelectedRow=function(){var a=this._getSelectedRow();a&&this.deleteRow(a.id)},d.prototype.findRowById=function(a){return this.domMap.body.querySelector('[id="'+a+'"]')},d.prototype.findNextRow=function(a){var b,c,d,e=this._getRows();for(b=0,c=e.length;c>b;b++)if(e[b].id==a){d=e[b+1];break}return d||{}},d.prototype.getTableId=function(){return this._currentTableId},d.prototype.getSavedTables=function(){var a,b=[];for(a in this._saveMap)this._saveMap.hasOwnProperty(a)&&b.push(a);return b},d.prototype.newTable=function(){return this._currentTableId=(new Date).getTime(),this.table=a(),this._saveMap[this._currentTableId]=this.table,this._updateTable(),this._currentTableId},d.prototype.restoreTable=function(a){var b=!1;return this._saveMap.hasOwnProperty(a)&&(this.table=this._saveMap[a],this._currentTableId=a,b=!0,this._updateTable()),b},d.prototype.destroy=function(a){this._saveMap.hasOwnProperty(a)&&(this._currentTableId===a&&this.newTable(),delete this._saveMap[a])},d.prototype.saveStatus=function(){this.table({deleted:"true"}).remove(),this.table().update({"new":"false",edited:"false",deleted:"false"})},d.prototype.getNewRows=function(a){var b,c,d={"new":"true"},f={};if(a){for(b in this._saveMap)this._saveMap.hasOwnProperty(b)&&(f[b]=this._saveMap[b](d).get());c=e.clone(f)}else c=e.clone(this.table(d).get());return c},d.prototype.getEditedRows=function(a){var b,c={edited:"true"},d={};if(a){for(b in this._saveMap)this._saveMap.hasOwnProperty(b)&&(d[b]=this._saveMap[b](c).get());return e.clone(d)}return e.clone(this.table(c).get())},d.prototype.getDeletedRows=function(a){var b,c={deleted:"true"},d={};if(a){for(b in this._saveMap)this._saveMap.hasOwnProperty(b)&&(d[b]=this._saveMap[b](c).get());return e.clone(d)}return e.clone(this.table(c).get())},d.prototype.isStatusChanged=function(a){var b,c,d,e,f,g=["getNewRows","getEditedRows","getDeletedRows"],h=0;if(a){for(b=0,c=g.length;c>b;++b){f=g[b],e=this[f](a);for(d in e)e.hasOwnProperty(d)&&(h+=e[d].length)}return h}return this.getNewRows().length+this.getEditedRows().length+this.getDeletedRows().length>0},d.prototype.extend=function(a,b){var c=d.prototype[a];d.prototype[a]=function(){this._super=c,b.apply(this,arguments)}},d.prototype.bindResize=function(a,b){e.addEvent(a,b,e.reduce(this._onResize.bind(this)))};var e={getScrollWidth:function(){var a,b,c,d;return a=document.createElement("div"),a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a),c=a.offsetWidth,a.style.overflow="scroll",b=document.createElement("div"),b.style.width="100%",a.appendChild(b),d=b.offsetWidth,a.parentNode.removeChild(a),c-d},inArray:function(a,b){var c,d;if("[object Array]"===Object.prototype.toString.call(b))for(c=0,d=b.length;d>c;++c)if(""+a==""+b[c])return!0;return!1},extend:function(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d},getType:function(a){return Object.prototype.toString.call(a)},isObject:function(a){return"[object Object]"===e.getType(a)},isArray:function(a){return"[object Array]"===e.getType(a)},clone:function(a){var b,c,d;if(e.isArray(a)){for(d=[],b=0,c=a.length;c>b;++b)d[b]=e.isArray(a[b])||e.isObject(a[b])?e.clone(a[b]):a[b];return d}if(e.isObject(a)){d={};for(b in a)a.hasOwnProperty(b)&&(d[b]=e.isArray(a[b])||e.isObject(a[b])?e.clone(a[b]):a[b]);return d}return a},getArrayByKey:function(a,b){var c,d,e=[];for(c=0,d=a.length;d>c;++c)a[c].hasOwnProperty(b)&&e.push(a[c][b]);return e},inherit:function(a){function b(){}return b.prototype=a,new b},addEvent:function(a,b){return b.addEventListener?function(b,c,d){if(b&&!b.length||b===a)b.addEventListener(c,d,!1);else if(b&&b.length)for(var f=b.length,g=0;f>g;g++)e.addEvent(b[g],c,d)}:b.attachEvent?function(b,c,d){if(b&&!b.length||b===a)b.attachEvent("on"+c,function(){return d.call(b,a.event)});else if(b.length)for(var f=b.length,g=0;f>g;g++)e.addEvent(b[g],c,d)}:void 0}(this,document),removeEvent:function(a,b){return b.removeEventListener?function(b,c,d){if(b&&!b.length||b===a)b.removeEventListener(c,d,!1);else if(b&&b.length)for(var f=b.length,g=0;f>g;g++)e.removeEvent(b[g],c,d)}:b.detachEvent?function(b,c,d){if(b&&!b.length||b===a)b.detachEvent("on"+c,function(){return d.call(b,a.event)});else if(b.length)for(var f=b.length,g=0;f>g;g++)e.removeEvent(b[g],c,d)}:void 0}(this,document),reduce:function(a,b){var c;return function(){c||(c=!0,setTimeout(function(){c=!1},b||20),a.apply(this,arguments))}}};return function(a,b){var c,e=function(){};return e.div_table=function(){var a,b=[].shift.apply(arguments);if("_"===b[0])throw"You can't call the private method! "+b;return"function"==typeof c[b]?a=c[b].apply(c,arguments):void console.warn(b,"is not a callable function")},c=new d,c.init(a,b,e),e}}();window.jQuery&&(window.jQuery.fn.div_table=function(a){return divTableMaker(this[0],a)});